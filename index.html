<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Auditory N-Back Training</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
      color: #fff;
      min-height: 100vh;
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      padding: 20px;
    }
    .container { width: 100%; max-width: 640px; }
    h1 {
      text-align: center; margin-bottom: 10px;
      font-size: 2.4em; text-shadow: 2px 2px 4px rgba(0,0,0,.3);
    }
    .subtitle { text-align: center; margin-bottom: 16px; opacity: .9; font-size: 1.1em; }
    .info {
      text-align: center; margin-bottom: 14px; padding: 13px 16px;
      background: rgba(255,255,255,.10); border-radius: 10px;
      font-size: 13.5px; line-height: 1.65;
    }
    .display {
      background: rgba(255,255,255,.10); border-radius: 20px;
      padding: 55px 40px; margin-bottom: 16px; min-height: 230px;
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255,255,255,.2); gap: 12px;
    }
    .speaker { font-size: 52px; opacity: 0; transition: opacity .1s; }
    .speaker.on { opacity: 1; }
    .glyph {
      font-size: 80px; font-weight: 900; line-height: 1;
      user-select: none; opacity: .18; transition: opacity .1s;
    }
    .glyph.on { opacity: 1; }
    .lbl { font-size: 18px; opacity: .85; text-align: center; }
    .btns { display: flex; gap: 12px; margin-bottom: 14px; }
    button {
      flex: 1; padding: 15px 12px; font-size: 17px;
      border: none; border-radius: 10px; cursor: pointer;
      font-weight: 800;
      transition: transform .15s, box-shadow .15s, opacity .15s;
      box-shadow: 0 4px 8px rgba(0,0,0,.35);
    }
    button:hover:not([disabled]) { transform: translateY(-2px); box-shadow: 0 6px 14px rgba(0,0,0,.45); }
    button:active:not([disabled]) { transform: translateY(0); }
    button[disabled] { opacity: .35; cursor: default; }
    .s  { background: #27ae60; color: #fff; }
    .st { background: #e74c3c; color: #fff; }
    .t  { background: #f1c40f; color: #1a1a1a; }
    .settings {
      background: rgba(255,255,255,.10); border-radius: 14px;
      padding: 16px 18px; margin-bottom: 14px; backdrop-filter: blur(10px);
    }
    .row {
      display: flex; align-items: center;
      justify-content: space-between; gap: 10px; margin-bottom: 11px;
    }
    .row:last-child { margin-bottom: 0; }
    label { font-size: 14.5px; font-weight: 700; white-space: nowrap; }
    input[type=number] {
      width: 72px; padding: 7px 8px; border-radius: 6px;
      border: none; font-size: 15px; text-align: center; color: #222;
    }
    input[type=range] { width: 188px; cursor: pointer; accent-color: #f1c40f; }
    select { padding: 8px 10px; border-radius: 7px; border: none; font-size: 15px; color: #222; }
    input[type=checkbox] { width: 18px; height: 18px; cursor: pointer; }
    .v { min-width: 52px; text-align: right; font-weight: 900; font-size: 14px; }
    .breath {
      text-align: center; margin-bottom: 10px;
      font-size: 18px; font-weight: 900; min-height: 26px;
    }
    .stats {
      background: rgba(255,255,255,.10); border-radius: 14px;
      padding: 14px; text-align: center; backdrop-filter: blur(10px);
    }
    .sl { font-size: 13px; opacity: .82; margin-bottom: 3px; }
    .sv { font-size: 32px; font-weight: 900; }
    .status {
      margin-top: 10px; padding: 10px 13px; border-radius: 10px;
      background: rgba(0,0,0,.28); font-size: 11.5px; line-height: 1.5;
      word-break: break-word; text-align: center;
    }
    @media (max-width: 540px) {
      input[type=range] { width: 100%; }
      .row { flex-direction: column; align-items: stretch; }
      .v { text-align: left; }
      .btns { flex-direction: column; }
    }
  </style>
</head>
<body>
<div class="container">

  <h1>Auditory N-Back</h1>
  <div class="subtitle">Pure Listening Training</div>

  <div class="info">
    Your browser speaks each <strong>number</strong> or <strong>letter</strong> aloud.
    Click <strong>â™ª Test Sound</strong> first.
    If nothing plays: unmute this tab, allow audio for this site, then try again.
  </div>

  <div class="breath" id="breath"></div>

  <div class="display">
    <div class="speaker" id="speaker">ðŸ”Š</div>
    <div class="glyph"   id="glyph">â€”</div>
    <div class="lbl"     id="lbl">Press Start to begin</div>
  </div>

  <div class="btns">
    <button class="s"  id="bStart">â–¶ Start</button>
    <button class="st" id="bStop"  disabled>â–  Stop</button>
    <button class="t"  id="bTest">â™ª Test Sound</button>
  </div>

  <div class="settings">
    <div class="row">
      <label for="nback">N-Back Level:</label>
      <input type="number" id="nback" min="1" max="15" value="8" />
    </div>
    <div class="row">
      <label>Interval (s):</label>
      <div style="display:flex;gap:8px;align-items:center;flex:1;justify-content:flex-end">
        <input type="range" id="ivSlider" min="3" max="30" step="0.5" value="5" />
        <span class="v" id="ivV">5.0s</span>
      </div>
    </div>
    <div class="row">
      <label>Speech Rate:</label>
      <div style="display:flex;gap:8px;align-items:center;flex:1;justify-content:flex-end">
        <input type="range" id="rSlider" min="0.5" max="1.5" step="0.05" value="0.85" />
        <span class="v" id="rV">0.85Ã—</span>
      </div>
    </div>
    <div class="row">
      <label for="stimSel">Stimulus:</label>
      <select id="stimSel">
        <option value="numbers" selected>Numbers (1â€“9)</option>
        <option value="letters">Letters (Aâ€“T)</option>
      </select>
    </div>
    <div class="row">
      <label for="bChk">Breath Sync:</label>
      <input type="checkbox" id="bChk" />
    </div>
  </div>

  <div class="stats">
    <div class="sl">Trials Completed</div>
    <div class="sv" id="tCount">0</div>
  </div>

  <div class="status" id="statusEl">Ready â€” click â™ª Test Sound to verify audio</div>

</div>
<script>
'use strict';
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  AUDITORY N-BACK â€” robust TTS, no beeps, no voice picker
//
//  ROOT CAUSE OF PREVIOUS "Script error." BUG:
//    Chrome's speechSynthesis.speak() throws DOMException
//    "Speech synthesis requires user activation" when called
//    from a setInterval/setTimeout callback that has drifted
//    more than ~1 second from the original click gesture.
//
//  FIX: The countdown ("3â€¦ 2â€¦ 1â€¦") is spoken via TTS itself,
//    chained through onend callbacks. Every speak() call in
//    the entire app is reachable from the original click via
//    a continuous onend â†’ speak â†’ onend â†’ speak chain.
//    setTimeout is used ONLY for the silent inter-trial gap,
//    not to wrap speak(). Chrome allows speak() from a
//    setTimeout that was set inside an onend handler.
//
//  OTHER RULES:
//    â€¢ Never cancel() before speak() during a running session
//    â€¢ 5-second keep-alive resume() prevents Chrome's silent freeze
//    â€¢ 6-second fallback timer so the game never deadlocks
//    â€¢ All speechSynthesis calls wrapped in try/catch
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

var SS = window.speechSynthesis;

// Prevent Chromeâ€™s 15-second silent engine-pause bug
setInterval(function () { try { SS.resume(); } catch (e) {} }, 5000);

// â”€â”€ DOM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
var speakerEl = document.getElementById(â€˜speakerâ€™);
var glyphEl   = document.getElementById(â€˜glyphâ€™);
var lblEl     = document.getElementById(â€˜lblâ€™);
var statusEl  = document.getElementById(â€˜statusElâ€™);
var bStart    = document.getElementById(â€˜bStartâ€™);
var bStop     = document.getElementById(â€˜bStopâ€™);
var bTest     = document.getElementById(â€˜bTestâ€™);
var nbackEl   = document.getElementById(â€˜nbackâ€™);
var ivSlider  = document.getElementById(â€˜ivSliderâ€™);
var ivV       = document.getElementById(â€˜ivVâ€™);
var rSlider   = document.getElementById(â€˜rSliderâ€™);
var rV        = document.getElementById(â€˜rVâ€™);
var stimSel   = document.getElementById(â€˜stimSelâ€™);
var bChk      = document.getElementById(â€˜bChkâ€™);
var breathEl  = document.getElementById(â€˜breathâ€™);
var tCount    = document.getElementById(â€˜tCountâ€™);

// â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
var running  = false;
var token    = 0;    // increment on stop to cancel all pending callbacks
var trials   = 0;
var hist     = [];
var bPhase   = â€˜inhaleâ€™;

// â”€â”€ Slider labels â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ivSlider.oninput = function () { ivV.textContent = parseFloat(ivSlider.value).toFixed(1) + â€˜sâ€™; };
rSlider.oninput  = function () { rV.textContent  = parseFloat(rSlider.value).toFixed(2) + â€˜Ã—â€™; };

// â”€â”€ Status â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function st(msg) { statusEl.textContent = â€™Status: â€™ + msg; }

// â”€â”€ Stimulus â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
var LTRS = [â€˜Aâ€™,â€˜Bâ€™,â€˜Câ€™,â€˜Dâ€™,â€˜Eâ€™,â€˜Fâ€™,â€˜Gâ€™,â€˜Hâ€™,â€˜Jâ€™,â€˜Kâ€™,â€˜Lâ€™,â€˜Mâ€™,â€˜Nâ€™,â€˜Pâ€™,â€˜Râ€™,â€˜Sâ€™,â€˜Tâ€™,â€˜Vâ€™];

function mode()      { return stimSel.value; }
function pool(m)     { return m === â€˜numbersâ€™ ? [1,2,3,4,5,6,7,8,9] : LTRS.slice(); }
function pick(arr)   { return arr[Math.floor(Math.random() * arr.length)]; }
function excObj(arr) { var o = {}; arr.forEach(function(x){ o[x] = 1; }); return o; }

function nbrs(s, m) {
var r = [];
if (m === â€˜numbersâ€™) {
if (s > 1) r.push(s - 1);
if (s < 9) r.push(s + 1);
} else {
var i = LTRS.indexOf(s);
if (i > 0)              r.push(LTRS[i - 1]);
if (i < LTRS.length-1)  r.push(LTRS[i + 1]);
}
return r;
}

function genStim() {
var n   = Math.max(1, parseInt(nbackEl.value) || 2);
var m   = mode();
var all = pool(m);
var s, near, exc, sub;

if (hist.length >= n) {
var target = hist[hist.length - n];
var roll   = Math.random();

```
if (roll < 0.30) {
  // exact match
  s = target;
} else if (roll < 0.50) {
  // adjacent foil
  near = nbrs(target, m);
  s = near.length ? pick(near) : pick(all.filter(function(x){ return x !== target; }));
} else {
  // clear non-match
  exc = excObj([target].concat(nbrs(target, m)));
  sub = all.filter(function(x){ return !exc[x]; });
  s = pick(sub.length ? sub : all);
}

// prevent consecutive identical (unless n=1 exact match)
var prev = hist[hist.length - 1];
if (s === prev && !(roll < 0.30 && n === 1)) {
  exc = excObj([prev, target].concat(nbrs(target, m)));
  sub = all.filter(function(x){ return !exc[x]; });
  if (sub.length) s = pick(sub);
}
```

} else {
// warm-up: avoid consecutive identical
s = pick(all);
if (hist.length && s === hist[hist.length - 1]) {
sub = all.filter(function(x){ return x !== s; });
if (sub.length) s = pick(sub);
}
}
return s;
}

// Phonetic word map for every letter in the pool.
// Passing a full word to TTS prevents the engine from prepending
// â€œletterâ€ or â€œcapitalâ€ â€” which it does automatically for any
// isolated single character (upper or lower case).
var PHONETIC = {
A:â€˜ayâ€™, B:â€˜beeâ€™, C:â€˜seeâ€™, D:â€˜deeâ€™, E:â€˜eeâ€™, F:â€˜efâ€™,
G:â€˜geeâ€™, H:â€˜aitchâ€™, J:â€˜jayâ€™, K:â€˜kayâ€™, L:â€˜elâ€™,
M:â€˜emâ€™, N:â€˜enâ€™, P:â€˜peeâ€™, R:â€˜arâ€™, S:â€˜essâ€™, T:â€˜teeâ€™, V:â€˜veeâ€™
};

function spoken(s) {
if (mode() === â€˜lettersâ€™) {
return PHONETIC[String(s).toUpperCase()] || String(s).toLowerCase();
}
return String(s);
}

// â”€â”€ Core TTS speak â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// speak(text, tok, onDone)
//
// onDone is called when:
//   (a) onend fires  â€” normal completion
//   (b) onerror fires (non-cancel errors) â€” so game never deadlocks
//   (c) 6-second fallback â€” so game never deadlocks
//
// onDone is NOT called on â€˜interruptedâ€™/â€˜canceledâ€™ (i.e. stopGame).
//
// NEVER calls SS.cancel() before speaking â€” that corrupts Chrome.
function speak(text, tok, onDone) {
if (tok !== token) return;   // stale call â€” session ended

try { SS.resume(); } catch (e) {}

var u    = new window.SpeechSynthesisUtterance(text);
u.rate   = parseFloat(rSlider.value);
u.pitch  = 1.0;
u.volume = 1.0;
u.lang   = â€˜en-AUâ€™;
// No u.voice â€” use the browserâ€™s default voice.

var settled = false;

function done(note) {
if (settled) return;
settled = true;
clearTimeout(fallback);
speakerEl.classList.remove(â€˜onâ€™);
glyphEl.classList.remove(â€˜onâ€™);
if (note) st(note);
if (tok === token && onDone) onDone();
}

// 6-second hard fallback â€” advances the game even if onend never fires
var fallback = setTimeout(function () {
if (!settled) done(â€˜TTS silent/timeout â€” check tab audioâ€™);
}, 6000);

u.onstart = function () {
speakerEl.classList.add(â€˜onâ€™);
glyphEl.classList.add(â€˜onâ€™);
st(â€˜speaking: â€œâ€™ + text + â€˜â€â€™);
};

u.onend = function () { done(â€˜done: â€œâ€™ + text + â€˜â€â€™); };

u.onerror = function (ev) {
var err = ev.error || â€˜unknownâ€™;
if (err === â€˜interruptedâ€™ || err === â€˜canceledâ€™) {
// stopGame() fired â€” silently settle without calling onDone
if (!settled) {
settled = true;
clearTimeout(fallback);
speakerEl.classList.remove(â€˜onâ€™);
glyphEl.classList.remove(â€˜onâ€™);
}
} else {
done(â€™TTS error: â€™ + err);
}
};

try {
SS.speak(u);
} catch (ex) {
done(â€™speak() threw: â€™ + ex.message);
}
}

// â”€â”€ Game loop â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Each trial: generate stimulus â†’ speak â†’ (inter-trial gap) â†’ next trial.
// speak() is called either from:
//   â€¢ countdown chain (onend â†’ onend â†’ onend â†’ first trial)
//   â€¢ subsequent trials via setTimeout set inside an onend callback
// Both paths maintain Chromeâ€™s gesture trust chain.
function doTrial(tok) {
if (!running || tok !== token) return;

trials++;
tCount.textContent = trials;

var s = genStim();
hist.push(s);
glyphEl.textContent = String(s);

speak(spoken(s), tok, function () {
if (!running || tok !== token) return;

```
if (bChk.checked) {
  bPhase = (bPhase === 'inhale') ? 'exhale' : 'inhale';
  breathEl.textContent = (bPhase === 'inhale') ? 'â†‘ Inhale' : 'â†“ Exhale';
}

var ms = Math.round(parseFloat(ivSlider.value) * 1000);
setTimeout(function () {
  doTrial(tok);
}, ms);
```

});
}

// â”€â”€ Countdown via TTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Speaks â€œ3â€ â†’ onend â†’ â€œ2â€ â†’ onend â†’ â€œ1â€ â†’ onend â†’ starts game.
// This keeps every speak() traceable to the original click gesture,
// which is what prevents Chromeâ€™s â€œrequires user activationâ€ throw.
function countdown(n, tok, onComplete) {
if (tok !== token) return;
if (n < 1) { onComplete(); return; }

lblEl.textContent = String(n);

speak(String(n), tok, function () {
countdown(n - 1, tok, onComplete);
});
}

// â”€â”€ UI lock â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function lockUI(on) {
bStart.disabled   = on;
bStop.disabled    = !on;
nbackEl.disabled  = on;
ivSlider.disabled = on;
rSlider.disabled  = on;
stimSel.disabled  = on;
}

// â”€â”€ Start â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function startGame() {
if (!bStart.disabled) {
lockUI(true);
st(â€˜startingâ€¦â€™);

```
var tok = ++token;   // new session token

// Reset game state
running = false;
trials  = 0;
hist    = [];
bPhase  = 'inhale';
tCount.textContent   = '0';
breathEl.textContent = '';
glyphEl.textContent  = 'â€”';
glyphEl.classList.remove('on');
speakerEl.classList.remove('on');

// Countdown 3 â†’ 2 â†’ 1 via TTS (keeps gesture chain alive)
countdown(3, tok, function () {
  if (tok !== token) return;

  lblEl.textContent    = 'Listenâ€¦';
  running              = true;
  breathEl.textContent = bChk.checked ? 'â†‘ Inhale' : '';
  st('running');
  doTrial(tok);
});
```

}
}

// â”€â”€ Stop â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function stopGame() {
if (!bStop.disabled) {
running = false;
token++;                         // invalidates all pending callbacks

```
try { SS.cancel(); } catch (e) {}

glyphEl.textContent  = 'â€”';
glyphEl.classList.remove('on');
speakerEl.classList.remove('on');
lblEl.textContent    = 'Press Start to begin';
breathEl.textContent = '';
lockUI(false);
st('stopped');
```

}
}

// â”€â”€ Test sound â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function testSound() {
if (!bTest.disabled) {
var m      = mode();
var sample = (m === â€˜lettersâ€™) ? â€˜bâ€™ : â€˜5â€™;
var tok    = token;   // donâ€™t change token â€” test is stateless

```
glyphEl.textContent = (m === 'letters') ? 'B' : '5';
st('testingâ€¦');

speak(sample, tok, function () {
  glyphEl.textContent = 'â€”';
  glyphEl.classList.remove('on');
  st('âœ“ TTS working â€” audio is fine');
});
```

}
}

// â”€â”€ Button events â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
bStart.addEventListener(â€˜clickâ€™, startGame);
bStop.addEventListener(â€˜clickâ€™,  stopGame);
bTest.addEventListener(â€˜clickâ€™,  testSound);

// Space bar shortcut
document.addEventListener(â€˜keydownâ€™, function (e) {
if (e.key === â€™ â€™ &&
e.target.tagName !== â€˜INPUTâ€™ &&
e.target.tagName !== â€˜SELECTâ€™) {
e.preventDefault();
if      (!bStart.disabled) startGame();
else if (!bStop.disabled)  stopGame();
}
});

st(â€˜Ready â€” click â™ª Test Sound to verify audioâ€™);
</script>

</body>
</html>
